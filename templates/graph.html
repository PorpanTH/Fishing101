<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Fishing 101</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">


{#   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">#}
{#    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" crossorigin="anonymous">#}
{#   <link rel="stylesheet" href="{{ url_for('static', filename='font-awesome/css/font-awesome.min.css')}}">#}
{#    <link href="https://use.fontawesome.com/releases/v5.0.8/css/all/css" rel="stylesheet">#}
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/style.css') }}" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js/dist/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>

    <style>
        .stars-outer {
          display: inline-block;
          position: relative;
        }
        .stars-inner {
          position: absolute;
          top: 0;
          left: 0;
          white-space: nowrap;
          overflow: hidden;
          width: 0;
        }
        .stars-outer::before {
          content: "\f005 \f005 \f005 \f005 \f005";
            font-family: "Font Awesome 5 Free";
          font-weight: 900;
          color: #ccc;

        }

        .stars-inner::before {
          content: "\f005 \f005 \f005 \f005 \f005";
            font-family: "Font Awesome 5 Free";
          font-weight: 900;
          color: #f8ce0b;
         }
        .stars-table{
          background-color: unset;
          margin: 10px auto 10px;
          padding: 10px 45px 30px 45px;
          text-align: center;
        }
        .nav{
            margin: auto;
            text-align: center;
            position: relative;
            background-color: #845ac7;
        }

    </style>

</head>


    <body>
          <ul class="topnav" id="myTopnav">
            <li class="text"><a href="/" class="active">Home</a></li>
            <li class="text"><a href="/register">Register</a></li>
            <li class="text"><a href="/logout">Logout</a></li>
         </ul>
        <h1 id="center">{{today}}</h1>
        <h1>{{fscore}}</h1>

          <div class="container mt-5">
      <table class="stars-table">
            <tbody>
              <tr class="sony" id="center">
                  <td>
                      <form method="post" class="nav" id="nav" action="/">
                        <input type="submit" id="arrowl" value="<" name="action2" />
                      </form>
                  </td>
                <td id="center">
                  <div class="stars-outer">
                    <div class="stars-inner"></div>
                  </div>
                </td>
                  <td>
                      <form method="post" class="nav" id="nav" action="/">
                        <input type="submit" id="arrowr" value=">" name="action1"/>
                      </form>
                  </td>
              </tr>
            </tbody>
          </table>
        </div>




        <canvas id="linechart" width="900" height="400"></canvas>
        <script>
            var ctx = document.getElementById("linechart").getContext("2d");
            var lineChart = new Chart(ctx, {
                type: "line",
                data: {
                    labels: [{% for item in labels %}
                        "{{item}}",
                    {% endfor %}],
                    datasets: [
                        {
                            label: "Data points",
                            data: [{% for item in values %}
                                {{item}},
                            {% endfor %}],
                            fill: 1,
                            borderColor: "rgb(256,256,256)",
                            lineTension: 0.01
                        }
                    ]
                },

                options: {
                    scales: {
                        x: {
                            type: 'time',
                            time: {
                                unit: 'hour'
                            }
                        },
                        y: {
                            beginAtZero: true,
                            max:100,
                            min:0

                        }
                    }
                  }
            });

            const ratings = {sony:{{fscore}}};
            const starsTotal = 5;

            // Run getRatings when DOM loads
            document.addEventListener('DOMContentLoaded', getRatings);
            const button = document.document.getElementById('arrowr')
                    button.disabled = true
            // Get ratings
            function getRatings() {
              for (let rating in ratings) {
                // Get percentage
                const starPercentage = ((-0.00005318*ratings[rating]*ratings[rating]*ratings[rating] +0.01064467*ratings[rating]*ratings[rating] -0.6724028*ratings[rating]+13.7646165) ) * 100;

                // Round to nearest 10
                const starPercentageRounded = `${Math.round(starPercentage / 10) * 10}%`;

                // Set width of stars-inner to percentage
                document.querySelector(`.${rating} .stars-inner`).style.width = starPercentageRounded;

              }
            }
        </script>

        <h2 class="text">Recommendation for this month</h2>
        <table class="table">
            <tr class="table__header">
                {%  for header in headings %}
                    <th>{{ header }}</th>
                {% endfor %}
            </tr>

            {% for row in data %}
            <tr class="table__row">
                <td class="table__cell">{{ row.0 }}</td>
                <td class="table__cell">{{ row.1 }}</td>
                <td class="table__cell">{{ row.2 }}</td>
                <td class="table__cell">{{ row.3 }}</td>
                <td class="table__cell">{{ row.4 }}</td>
            </tr>
            {%  endfor %}

        </table>
        <table class="table">
            <tr class="table__header">
                {%  for header in headings1 %}
                    <th>{{ header }}</th>
                {% endfor %}
            </tr>

            {% for row in data1 %}
            <tr class="table__row">
                <td class="table__cell">{{ row.0 }}</td>
                <td class="table__cell">{{ row.1 }}</td>
                <td class="table__cell">{{ row.2 }}</td>
                <td class="table__cell">{{ row.3 }}</td>
                <td class="table__cell">{{ row.4 }}</td>
            </tr>
            {%  endfor %}

        </table>
    </body>
</html>